<div class="container">
  @if (tasks.length > 0){

  <div class="card-container" #cardContainer>
    @for (x of tasks; track x) {

    <div class="task-card" [class.completed]="x.completed">
      <h2 class="task-title">{{ x.taskTitle }}</h2>
      <p class="task-desc">{{ x.taskDescription }}</p>
      <ul class="link-list">
        @for (y of x.links;track y){
        <li>
          <a href="{{y}}" target="_blank" rel="noopener noreferrer">{{y}}</a>
        </li>
        }
      </ul>
      <p class="task-date">{{ x.createdAtFormatted }}</p>
      <div class="task-actions">
        <button (click)="edittask(x._id)" class="taskButton primary-cta-sheen">Edit</button>
        <button (click)="deletetask(x._id)" class="taskButton secondary-button">Delete</button>
        <button (click)="markAsDone(x)" class="taskButton done-button">{{ x.completed ? 'UNDONE' : 'DONE' }}</button>
      </div>
      <div class="radioContainer">

      </div>
    </div>
    }
  </div>
  }


  <!-- members -->
  <!--  -->
  <div id="formDiv">
    <form class="custom-form" [formGroup]="form" (submit)="onSubmit()">
      <div class="form-group">
        <label for="title" class="custom-label">title</label>
        <input placeholder="task title" id="title" name="title" formControlName="title" type="text" class="formInput" />
      </div>
      <div class="form-group">
        <label for="description" class="custom-label">description</label>
        <input placeholder="Task description" id="description" name="description" formControlName="description"
          type="text" class="formInput" />
      </div>
      <div class="form-group">
        <label for="links" class="custom-label">Links</label>
        <input
          placeholder="Add links, press Enter to add"
          id="links"
          name="links"
          formControlName="links"
          type="text"
          class="formInput"
          (keydown.enter)="addLink($event)"
        />
        <div class="link-chips">
          @for (link of form.get('links')?.value; track link) {
            <span class="chip">{{ link }} <button class="clear-button" (click)="removeLink(link)">x</button></span>
          }
        </div>
      </div>
      <footer>
        <button type="submit" id="submitButton" class="formButton primary-cta-sheen">Add Task</button>
      </footer>
    </form>
    <div class="membersAdd">
      <span>
        <h1 class="members-title">members</h1>
        <ul class="member-list">
          @for(x of members; track x){
          <li>
            <h1 class="member-name">{{x}}</h1>
          </li>
          }
        </ul>
      </span>
      <span class="add-member-section">
        <input #naam placeholder="enter username" class="formInput">
        <br />
        <button (click)="addmember(naam.value)" class="formButton primary-cta-sheen">ADD MEMBER</button>
      </span>
    </div>
  </div>
</div>